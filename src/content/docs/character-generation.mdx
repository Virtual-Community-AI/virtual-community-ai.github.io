---
title: "Character Generation Pipeline"
description: "Complete pipeline for generating multi-agent community in the scene"
order: 4
author: "Virtual Community Team"
publishedDate: 2025-06-16
lastModified: 2025-06-16
featured: true
difficulty: "beginner"
draft: false

---

## Run

<ol class="list-decimal ml-6">
  <li>
  Prepare the OPENAI GPT-4o API key and create `.api_keys.json` under the root directory. Then, copy the following into `.api_keys.json`:
  ```
  {
    "all": [
      {
          "AZURE_ENDPOINT": "YOUR ENDPOINT HERE",
          "OPENAI_API_KEY": "YOUR KEY HERE"
      }
    ]
  }
  ```
  </li>
  <li>Open `scripts/generate_characters_all.sh` and modify the scene(s) you want to generate characters, for example, if you want to generate characters for LONDON:
`SCENES=(LONDON)`</li>
  <li>Run `bash scripts/generate_characters_all.sh` to start generation process</li>
</ol>

### Reminders

The script supports annotating multiple scenes at once, for example, `SCENES=(LONDON TORONTO)`, but we recommend annotating one scene at a time.

## Procedure Overview

There are 2 steps in the character generation pipeline. We provide an overview of main sub-steps of each step. Please refer to the source code for full sub-steps.

### Step 1: Generate characters and annotate images of known places
<ol class="list-decimal ml-6">
  <li>Generate config-level place/building metadata</li>
  <li>Sample Mixamo and celebrity characters from the pool</li>
  <li>Generate character profiles and groups information with grounding validator</li>
  <li>Annotate known places on the global image, which generates `known_places.png`</li>
</ol>

### Step 2: Offset the xy positions for indoor places